## 介绍

### 架构模式

- 前后端混合
- 半分离
- 分离
  - 开发
  - 维护

### 前后端分离

- 数据由后台处理
  - 服务端工程项目
- 视图由前台处理
  - 客户端工程项目

### 技术栈

- Node.js

- Express
- MySQL
- RESTful
- 前后端分离
- 服务端只处理数据，提供接口
- 客户端通过接口和服务端交互
- 服务端接口
- 客户端视图



## 需求分析

- 用户的需求
- 网站提供的功能
- 用户
  - 用户登陆
    - 第三方登陆、微信登陆、qq 登陆
  - 用户注册
  - 用户退出
- 话题
  - 用户可以创建话题
  - 话题的修改
  - 删除
  - 话题分类
- 话题评论

### 迭代式开发

- scrum 敏捷开发

- 第一版（核心功能）
  - 基本的登陆、注册、退出
  - 话题的增删改查
  - 评论的增删改查
- 第二版
  - 增加第三方登陆功能
  - 话题详细分类
  - 用户通知
  - ...
- 第三版
- ...

### 任务划分及时间估算

- 5人团队（客户端团队或者服务端团队）

- 每个人都参与
- 规定任务的时间节点
- 划分给具体的人来负责

## 数据库设计

### 用户表



### 话题表

### 评论表



## 路由设计

> 接口设计准则：RESTful，帮你规范接口的设计
>
> API First（前端驱动后端）
>
> - 前后端共同设计接口
> - 一般的前端是不具备这个能力的，因为没有服务端经验
> - 具有服务端开发经验的前端才有和后端共同设计接口的能力
>   - 如果服务端设计的接口不合理，你用起来就很痛苦
>   - 以服务端开发人员为主，客户端开发人员为辅
> - url 中不能有动词
> - url 指向具体的资源，资源名是复数
> - 使用 HTTP 请求方法作为对资源的操作行为
>   - GET 获取
>   - POST 添加
>   - 修改
>     - PUT 完整更新
>     - PATCH 局部更新
>   - 删除
>     - DELETE
> - 响应状态码
>   - 200 查询
>   - 201 创建
>   - 204 删除成功
>   - 400 客户端错误
>   - 401 没有权限
>     - 未授权的接口返回 401
>   - 403
>     - 用户授权，但是没有操作权限
>   - 404
>     - 资源不存在
>   - 500
>     - 服务器内部错误

### 用户管理

- 查询用户
- 创建用户
- 编辑用户
- 删除用户

### 会话管理

- 用户注册

- 用户登陆
- 用户退出

#### 用户注册

- 请求路径：`/signup`
- 请求方法：`POST`
- 请求参数

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| email    | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |
| nickname | 昵称     | 不能为空 |

- 响应数据

```

```



#### 用户登陆

- 请求路径：`/signin`
- 请求方法：`POST`
- 请求参数

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| email    | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |

- 响应数据

```

```

#### 用户退出

- 请求路径：`/signout`
- 请求方法：`DELETE`
- 请求参数

- 响应数据

```

```


### 话题管理

- 查询话题
  - 查询话题列表
  - 查询单个话题
- 话题搜索
  - 按照标题搜索话题
- 创建话题
- 编辑话题
- 删除话题

#### 创建话题

- 请求路径：`/topics`
- 请求方法：`POST`
- 请求参数

| 参数名  | 参数说明 | 备注     |
| ------- | -------- | -------- |
| title   | 话题标题 | 不能为空 |
| content | 话题内容 | 不能为空 |

- 响应数据

```

```

#### 编辑话题

- 请求路径：`/topics/:id`
- 请求方法：`PATCH`
- 请求参数

| 参数名  | 参数说明 | 备注     |
| ------- | -------- | -------- |
| title   | 话题标题 | 不能为空 |
| content | 话题内容 | 不能为空 |

- 响应数据

```

```

#### 删除话题

- 请求路径：`/topics/:id`
- 请求方法：`DELETE`
- 请求参数
- 响应数据

```

```



#### 话题列表

- 请求路径：`/topics`
- 请求方法：`GET`
- 请求参数

| 参数名 | 参数说明     | 备注                       |
| ------ | ------------ | -------------------------- |
| _page  | 分页页码     | 默认为第1页，可以为空      |
| _limit | 分页每页大小 | 默认每页20条数据，可以为空 |
| q      | 搜索文本     | 默认全文检索，可以为空     |

- 响应数据

```

```



#### 根据id查询单个话题

- 请求路径：`/topics/:id`
- 请求方法：`GET`
- 请求参数
- 响应数据

```

```



### 评论管理

- 查询评论
- 创建评论
- 编辑评论
- 删除评论

## 初始化

- [Express application generator](http://expressjs.com/en/starter/generator.html)

## 路由模块

## 控制器模块

## 模型模块

## 功能实现

